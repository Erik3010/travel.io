import{d as X,a as B,r as $,c as z,o as d,b as p,u as m,e as q,f as i,F as R,g as j,h as F,i as U,_ as I,j as J,k as x,w as H,l as K,n as Z}from"./index.9a97059c.js";const C=X("map",{state:()=>({svg:null,zoomScale:1,viewBox:{x:0,y:0,width:0,height:0},position:{x:0,y:0},maxScale:10,minScale:.5,isDragging:!1,isOutOfBound:!1}),getters:{mapGroupElement:e=>e.svg.querySelector("#map-group"),provinceElements:e=>{const t=e.svg;return Array.from(t.querySelectorAll("path[iso_a2=ID]"))},groupIslandByProvince:()=>e=>{const t=e.getAttribute("iso_3166_2");return Array.from(document.querySelectorAll(`path[iso_3166_2=${t}]`))},getProvincePrimaryIsland:()=>e=>e.reduce((t,s)=>{if(t===null)return s;const{width:r,height:n}=t.getBoundingClientRect(),{width:u,height:l}=s.getBoundingClientRect();return r*n<u*l?s:t},null),getAllGroupedIsland(){const e=[];for(const t of this.provinceElements){const s=t.getAttribute("iso_3166_2"),r=t.getAttribute("name");if(e.find(v=>v.id===s))continue;const n=this.groupIslandByProvince(t),u=this.getProvincePrimaryIsland(n),l=u.getBBox(),_={id:s,name:r,islandEls:n,primaryIsland:{element:u,props:l}};e.push(_)}return e}},actions:{setSVGIntialSize(e,t){this.viewBox.width=e,this.viewBox.height=t},centerizedMap(){const{width:e,height:t}=this.mapGroupElement.getBBox();this.position.x=(this.viewBox.width-e)/2,this.position.y=(this.viewBox.height-t)/2},movePosition(e){this.position.x+=e.x,this.position.y+=e.y},setScale({position:e,target:t,scale:s}){this.position.x=e.x-t.x*s,this.position.y=e.y-t.y*s,this.zoomScale*=s},zoom({position:e,scale:t,isZoomIn:s,isCloseUp:r=!1}){const{x:n,y:u}=e,l={x:n-this.position.x,y:u-this.position.y};if(this.zoomScale*t>=this.maxScale&&s||this.zoomScale*t<=this.minScale&&!s)if(this.isOutOfBound=!r,this.isOutOfBound)this.setScale({position:e,target:l,scale:1});else{this.isOutOfBound=!0;const _=r?s?this.maxScale/this.zoomScale:this.minScale:t;this.setScale({position:e,target:l,scale:_})}else this.isOutOfBound=!1,this.setScale({position:e,target:l,scale:t})}}}),V=(e,t)=>`translate(${e.x} ${e.y}) scale(${t})`,Q=["transform"],ee=B({__name:"Pin",props:{province:null},setup(e){const t=e,s=C(),r=$(null),{x:n,y:u,width:l,height:_}=t.province.primaryIsland.props,v=z(()=>1/s.zoomScale),w=z(()=>{var b,k,M,E;const h=(k=(b=r.value)==null?void 0:b.getBoundingClientRect())!=null?k:null,y={width:(M=h==null?void 0:h.width)!=null?M:0,height:(E=h==null?void 0:h.height)!=null?E:0};return V({x:n+l/2-v.value*y.width/2,y:u+_/2-v.value*y.height/2},v.value)});return(h,y)=>(d(),p("path",{transform:m(w),ref_key:"pinEl",ref:r,class:"fill-gray-700 transition-transform duration-[0.6s] pointer-events-none","fill-rule":"evenodd",stroke:"none",d:`M11.54 22.351l.07.04.028.016a.76.76 0 00.723 0l.028-.015.071-.041a16.975\r
    16.975 0 001.144-.742 19.58 19.58 0 002.683-2.282c1.944-1.99 3.963-4.98\r
    3.963-8.827a8.25 8.25 0 00-16.5 0c0 3.846 2.02 6.837 3.963 8.827a19.58 19.58\r
    0 002.682 2.282 16.975 16.975 0 001.145.742zM12 13.5a3 3 0 100-6 3 3 0 000\r
    6z`,"clip-rule":"evenodd"},null,8,Q))}}),te=["viewBox"],ne=["stroke-width","transform"],se=B({__name:"Map",emits:["initMap"],setup(e,{emit:t}){const s=$(null),r=$(null),n=C(),u=z(()=>1/n.zoomScale),l=z(()=>V({x:n.position.x,y:n.position.y},n.zoomScale));return q(async()=>{const _=await(await fetch("src/assets/ID.svg")).text(),v=new DOMParser().parseFromString(_,"image/svg+xml"),w=Array.from(v.querySelectorAll("svg > path"));for(const h of w)r.value.prepend(h);n.svg=s.value,t("initMap")}),(_,v)=>(d(),p("svg",{ref_key:"svg",ref:s,fill:"#3498db",stroke:"#ecf0f1",xmlns:"http://www.w3.org/2000/svg",viewBox:`${m(n).viewBox.x} ${m(n).viewBox.y} ${m(n).viewBox.width} ${m(n).viewBox.height}`},[i("g",{id:"map-group",ref_key:"mapGroup",ref:r,"stroke-width":m(u),transform:m(l)},[m(n).svg?(d(!0),p(R,{key:0},j(m(n).getAllGroupedIsland,w=>(d(),U(ee,{province:w},null,8,["province"]))),256)):F("",!0)],8,ne)],8,te))}});const oe={},re={class:"rounded-full p-2 bg-gray-100 transition hover:bg-gray-200"};function ie(e,t){return d(),p("button",re,[J(e.$slots,"default")])}const D=I(oe,[["render",ie]]),ae={},ce={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",class:"w-5 h-5 stroke-gray-800 stroke"},le=i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"},null,-1),de=[le];function ue(e,t){return d(),p("svg",ce,de)}const he=I(ae,[["render",ue]]),pe={},_e={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",class:"w-5 h-5 stroke-gray-800"},ve=i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"},null,-1),me=[ve];function ge(e,t){return d(),p("svg",_e,me)}const fe=I(pe,[["render",ge]]),xe={class:"flex justify-between border-b border-gray-200 p-4 sticky top-0 bg-white"},we=i("h1",{class:"font-bold text-2xl"},[i("span",{class:"text-primary-base"},"Travel"),i("span",{class:"text-secondary"},".io")],-1),ye={class:"flex space-x-3"},Se=B({__name:"SidebarHeader",setup(e){return(t,s)=>(d(),p("header",xe,[we,i("div",ye,[x(D,null,{default:H(()=>[x(he)]),_:1}),x(D,null,{default:H(()=>[x(fe)]),_:1})])]))}}),$e="/travel.io/assets/image.a62e342d.jpg",Be={},be={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-4 h-4 stroke-white"},ke=i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12.75 3.03v.568c0 .334.148.65.405.864l1.068.89c.442.369.535 1.01.216 1.49l-.51.766a2.25 2.25 0 01-1.161.886l-.143.048a1.107 1.107 0 00-.57 1.664c.369.555.169 1.307-.427 1.605L9 13.125l.423 1.059a.956.956 0 01-1.652.928l-.679-.906a1.125 1.125 0 00-1.906.172L4.5 15.75l-.612.153M12.75 3.031a9 9 0 00-8.862 12.872M12.75 3.031a9 9 0 016.69 14.036m0 0l-.177-.529A2.25 2.25 0 0017.128 15H16.5l-.324-.324a1.453 1.453 0 00-2.328.377l-.036.073a1.586 1.586 0 01-.982.816l-.99.282c-.55.157-.894.702-.8 1.267l.073.438c.08.474.49.821.97.821.846 0 1.598.542 1.865 1.345l.215.643m5.276-3.67a9.012 9.012 0 01-5.276 3.67m0 0a9 9 0 01-10.275-4.835M15.75 9c0 .896-.393 1.7-1.016 2.25"},null,-1),Me=[ke];function Ee(e,t){return d(),p("svg",be,Me)}const ze=I(Be,[["render",Ee]]),Ie={id:"card",class:"flex bg-white rounded-sm overflow-hidden cursor-pointer hover:bg-gray-100"},Ce={class:"w-full p-4"},Le={class:"bg-primary-base rounded-full p-1 inline-block"},Ae=i("h3",{class:"text-lg font-bold text-gray-800"},"Chinatown",-1),Oe=i("p",{class:"text-sm text-gray-600"},"Jakarta, PIK",-1),Pe=i("div",{class:"w-40"},[i("img",{src:$e,class:"object-cover w-full h-full flex-none",alt:""})],-1),He=B({__name:"Card",setup(e){return(t,s)=>(d(),p("div",Ie,[i("div",Ce,[i("div",Le,[x(ze)]),Ae,Oe]),Pe]))}}),De={class:"h-full border-l bg-gray-50 border-l-gray-200"},Ge={class:"p-4 bg-slate-200 overflow-y-auto h-[calc(100vh-70px)] space-y-3"},Re=B({__name:"Index",setup(e){return(t,s)=>(d(),p("aside",De,[x(Se),i("div",Ge,[(d(),p(R,null,j(10,r=>x(He,{key:r})),64))])]))}}),G=1.1,je={class:"w-full h-full grid grid-cols-[1.5fr_4fr]"},Ye=B({__name:"Index",setup(e){const t=$(null),s=$(!1),r=$({x:0,y:0}),n=C(),{setSVGIntialSize:u,centerizedMap:l,movePosition:_,zoom:v}=n,w=o=>{o.preventDefault();const{offsetY:c,offsetX:g}=o;s.value=!0,r.value={x:g,y:c}},h=o=>{if(!s.value)return;n.isDragging=!0;const{offsetY:c,offsetX:g}=o;_({x:g-r.value.x,y:c-r.value.y}),r.value={x:g,y:c}},y=o=>{s.value=!1,n.isDragging=!1},b=o=>{o.preventDefault();const{deltaY:c,offsetY:g,offsetX:a}=o,f=c<0,S=f?G:1/G;v({isZoomIn:f,position:{x:a,y:g},scale:S})},k=(o,c)=>{const a=n.svg.getBoundingClientRect(),f=o.getBoundingClientRect(),S=n.mapGroupElement,L=()=>{S.style.transition="",S.removeEventListener("transitionend",L)},A=a.width/2,O=a.height/2,N=A-(f.x-a.x+f.width/2),T=O-(f.y-a.y+f.height/2);_({x:N,y:T}),S.style.transition=".6s cubic-bezier(0.785, 0.135, 0.15, 0.86)",S.addEventListener("transitionend",L);const W={x:A,y:O},P=Math.min((a.width-200)/f.width,(a.height-100)/f.height);v({position:W,scale:P,isZoomIn:n.zoomScale<n.zoomScale*P,isCloseUp:!0})},M=o=>{for(const c of n.groupIslandByProvince(o))c.classList.add("hover")},E=o=>{for(const c of n.groupIslandByProvince(o))c.classList.remove("hover")},Y=()=>{const o=n.svg,{width:c,height:g}=t.value.getBoundingClientRect();u(c,g),l(),o.addEventListener("mousedown",w),o.addEventListener("mousemove",h),o.addEventListener("wheel",b),window.addEventListener("mouseup",y);for(const a of n.provinceElements)a.addEventListener("click",k.bind(null,a)),a.addEventListener("mousemove",M.bind(null,a)),a.addEventListener("mouseout",E.bind(null,a))};return K(()=>{const o=n.svg;o.removeEventListener("mousedown",w),o.removeEventListener("mousemove",h),o.removeEventListener("wheel",b),window.removeEventListener("mouseup",y)}),(o,c)=>(d(),p("div",je,[x(Re),i("div",{id:"map",class:"overflow-hidden w-full h-full flex items-center",style:Z({cursor:m(n).isDragging?"grabbing":"grab"}),ref_key:"mapWrapper",ref:t},[x(se,{onInitMap:Y})],4)]))}});export{Ye as default};
